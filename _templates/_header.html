{% block path_header %}
<nav class="path-header">
    <ul class="header-nav">

        {# ---------- breadcrumbs (parents) ---------- #}
        {% for page_id in page.family_line %}
        {% set parent_page = site.pages[page_id] %}
        {% set parent_href = assets_prefix ~ parent_page.url %}

        {% set parent_icon_src = parent_page.icon %}
        {% if parent_icon_src and not (parent_icon_src.startswith('http://')
        or parent_icon_src.startswith('https://')
        or parent_icon_src.startswith('data:')) %}
        {% set parent_icon_src = assets_prefix ~ parent_icon_src %}
        {% endif %}

        {% if parent_page.emoji %}
        <li class="header-title-block">
            <a href="{{ parent_href }}">{{ parent_page.emoji }} {{ parent_page.title }}</a>
        </li>
        {% elif parent_page.icon %}
        <li class="header-title-block">
            <a href="{{ parent_href }}">
                <span class="miniicon"><img src="{{ parent_icon_src }}"></span> {{ parent_page.title }}
            </a>
        </li>
        {% else %}
        <li class="header-title-block">
            <a href="{{ parent_href }}">{{ parent_page.title }}</a>
        </li>
        {% endif %}
        {% endfor %}

        {# ---------- current page (NO prefixing) ---------- #}
        {% if page.emoji %}
        <li class="header-title-block">{{ page.emoji }} {{ page.title }}</li>
        {% elif page.icon %}
        <li class="header-title-block">
        <span>
          <span class="miniicon"><img src="{{ page.icon }}"></span> {{ page.title }}
        </span>
        </li>
        {% else %}
        <li class="header-title-block">{{ page.title }}</li>
        {% endif %}

    </ul>

    {% if site.search_index %}
    <div class="search-container">
        <i class="fas fa-search search-icon"></i>
        <input type="text" id="search-input" placeholder="Search..." style="display: none;">
        <div id="search-results" style="display: none;"></div>
    </div>
    {% endif %}
</nav>
{% endblock path_header %}

<header>
    {% block cover %}
    <div class="cover">
        {% if page.cover %}
        <img id="page-cover" src="{{ page.cover }}">
        {% endif %}
    </div>
    {% endblock cover %}

    {% block icon %}
    {% if page.emoji %}
    <div class="icon">
        {{ page.emoji }}
    </div>
    {% elif page.icon %}
    <div class="icon">
        <img id="page-icon" src="{{ page.icon }}" style="margin-top: -25px;">
    </div>
    {% endif %}
    {% endblock icon %}
</header>
